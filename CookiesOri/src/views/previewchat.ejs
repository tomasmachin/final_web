<!--/views/previewchats.ejs-->
<%- include('header') %>
    <div>
        <!--Existing chats START-->
        <h1 id="login-welcome">Select a chat</h1>

        <% if (chats.length == 0) { %>
            <p>No chats available. Create a new chat to start!</p>
            <% } else { %>
                <% chats.forEach((chat)=> { %>
                    <div class="chat" id="<%= chat.id %>">
                        <form action="/previewchat/selectChat" method="POST">
                            <input type="hidden" name="chat_id" value="<%= chat.id %>">
                            <button type="submit">
                                <%= chat.title %>
                            </button>
                    </div>
                <% }); %>
            <% } %>
        <!--Existing chats END-->

        <!--Manage Chats START-->
        <!--Manage Chats END-->
    </div>

    <div id="admin-content">
        <h1>Contenido para Administradores</h1>
    </div>

    <script>
        function getCookie(name) {
            const value = `; ${document.cookie}`;
            const parts = value.split(`; ${name}=`);
            if (parts.length === 2) return parts.pop().split(';').shift();
        }        

        const role = getCookie('role');
        if (role === 'admin') {
        document.getElementById('admin-content').style.display = 'block';
        } 
    </script>
<%- include('footer') %>